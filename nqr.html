<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="RDVessentiel.be">
        <meta name="author" content="Guillaume Derval">
        <title>https://www.rdvessentiel.be</title>

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css">
        <script type="text/javascript" src="https://unpkg.com/qr-code-styling/lib/qr-code-styling.js"></script>
    </head>
    <body>
        <main>
            <noscript>Gelieve javascript te activeren om de QR-code te genereren.</noscript>
            <div class="py-5 text-center">
                <h2>Een afspraak vastleggen in onze zaak, hier, aan de voordeur</h2>
            </div>
            <h4>1. Scan de QR-code of ga naar het adres dat hieronder vermeld is.</h4>
            <h4>2. Wacht totdat de persoon die zich nog in de winkel bevindt, deze verlaat, of dat men u duidelijk maakt dat u een afspraak mag nemen</h4>
            <h4>3. Druk op de knop</h4>
            <h4>4. Ziezo, u hebt een afspraak </h4>

            <div class="py-5 text-center">
                <div id="canvas"></div>
                <h4><span id="url"></span></h4>
            </div>


            <h4>U hebt geen smartphone of houdt niet van technologie? Bel de zaak op nummer: </h4>

            <footer class="my-5 pt-5 text-muted text-center text-small">Powered by rdvessentiel.be</footer>

            <script type="text/javascript">
                var curLang = "fr";
                var filePath = document.location.pathname.split("/");
                var fileName = filePath[filePath.length-1];
                //if(fileName.startsWith("e")) curLang = "en";
                if(fileName.startsWith("n")) curLang = "nl";
                var prefix = {"fr": "", "en": "e", "nl": "n"};

                let urlData = new URL(window.location.href);
                let name = urlData.searchParams.get("name");
                let url = "https://www.rdvessentiel.be/"+prefix[curLang]+"r?"+encodeURIComponent(name).replace(/%20/g, "+");
                const qrCode = new QRCodeStyling({
                    width: 300,
                    height: 300,
                    data: url,
                    dotsOptions: {
                        color: "#000000",
                        type: "square"
                    },
                    backgroundOptions: {
                        color: "#FFFFFF"
                    }
                });
                qrCode.append(document.getElementById("canvas"));
                document.getElementById("url").textContent = url;
                window.print();
            </script>
        </main>
    </body>
</html>
